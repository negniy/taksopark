# TaksoPark

TaksoPark — это RESTful веб-приложение для управления таксопарком. Оно предоставляет API для выполнения различных операций, таких как управление автомобилями, моделями, водителями, клиентами, поездками, а также выполнение агрегированных запросов.

## Функциональные возможности

Управление автомобилями: Создание, получение, обновление и удаление автомобилей.

Управление моделями: Управление моделями автомобилей (создание, получение, обновление, удаление).

Управление водителями: Работа с данными водителей через операции CRUD.

Управление клиентами: Ведение данных клиентов, включая номера телефонов.

Управление поездками: Запись и управление данными поездок (координаты начала и конца, время, стоимость).

Кастомные запросы: Выполнение сложных запросов, например, выборка автомобилей по году, статистика поездок водителей и подсчет поездок клиентов.

## Технологический стек

Backend: Go (Golang)

База данных: MySQL

ORM: GORM

Веб-сервер: Пакет net/http в Go

## Структура проекта

main.go: Точка входа приложения. Инициализирует базу данных и запускает HTTP-сервер.

models.go: Содержит модели GORM для таких сущностей, как Driver, Car, Model, Customer, Trip.

dto.go: Data Transfer Objects (DTO) для результатов кастомных запросов.

services/: Слой сервисов, который содержит бизнес-логику и обработку запросов для различных сущностей:

carsService.go: Сервис для работы с автомобилями.

modelsService.go: Сервис для работы с моделями.

driversService.go: Сервис для работы с водителями.

customersService.go: Сервис для работы с клиентами.

tripsService.go: Сервис для работы с поездками.

queryService.go: Сервис для выполнения сложных запросов.

## Установка и запуск

Убедитесь, что у вас установлены Go и MySQL.

Создайте базу данных MySQL и укажите данные для подключения в main.go (переменная dbconnect).

Установите зависимости, выполнив:

go mod tidy

Запустите приложение:

go run main.go

Приложение будет доступно по адресу http://localhost:8080.

## API Эндпоинты

### Автомобили:

POST /cars: Создать автомобиль

GET /cars: Получить все автомобили

GET /cars/{id}: Получить автомобиль по ID

PUT /cars/{id}: Обновить данные автомобиля

PATCH /cars/{id}: Частично обновить данные автомобиля

DELETE /cars/{id}: Удалить автомобиль

### Модели:

POST /models: Создать модель

GET /models: Получить все модели

GET /models/{id}: Получить модель по ID

PUT /models/{id}: Обновить данные модели

PATCH /models/{id}: Частично обновить данные модели

DELETE /models/{id}: Удалить модель

### Водители:

POST /drivers: Создать водителя

GET /drivers: Получить всех водителей

GET /drivers/{id}: Получить водителя по ID

PUT /drivers/{id}: Обновить данные водителя

PATCH /drivers/{id}: Частично обновить данные водителя

DELETE /drivers/{id}: Удалить водителя

### Клиенты:

POST /customers: Создать клиента

GET /customers: Получить всех клиентов

GET /customers/{id}: Получить клиента по ID

PUT /customers/{id}: Обновить данные клиента

PATCH /customers/{id}: Частично обновить данные клиента

DELETE /customers/{id}: Удалить клиента

### Поездки:

POST /trips: Создать поездку

GET /trips: Получить все поездки

GET /trips/{id}: Получить поездку по ID

PUT /trips/{id}: Обновить данные поездки

PATCH /trips/{id}: Частично обновить данные поездки

DELETE /trips/{id}: Удалить поездку

### Кастомные запросы:

GET /cars/year/{year}: Получить все автомобили за указанный год

GET /drivers/count: Получить статистику поездок по водителям

GET /drivers/autocount: Получить статистику поездок водителей с указанием автомобилей

GET /clients/trips/{n}: Получить клиентов, которые совершили больше n поездок

GET /drivers/best: Получить лучших водителей (с максимальным количеством поездок)

GET /statistics: Получить статистику по времени поездок (минимальное, среднее, максимальное время)
